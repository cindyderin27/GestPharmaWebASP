@model IEnumerable<GestPharmaWebASP.Models.MedicamentModel>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/_LayoutPage1.cshtml";
}

<h2>Index</h2>

<head>
    <meta name="viewport" content="width=device-width" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />

    @*<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>*@
    <link href="~/Content/bootstrap.css" rel="stylesheet" />

    <link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />

    <script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js "></script>

    <script>
        $(document).ready(function () {
            $("#demoGrid").DataTable({

                "processing": true, // for show progress bar
                "serverSide": true, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 5,

                //"ajax": {
                //    "url": "/Demo/LoadData",
                //    "type": "POST",
                //    "datatype": "json"
                //},

                "columnDefs":
                    [{
                        "targets": [0],
                        "visible": false,
                        "searchable": false
                    },
                    {
                        "targets": [7],
                        "searchable": false,
                        "orderable": false
                    },
                    {
                        "targets": [8],
                        "searchable": false,
                        "orderable": false
                    },
                    {
                        "targets": [9],
                        "searchable": false,
                        "orderable": false
                    }],

                "columns": [
                    { "data": "DrugId", "name": "DrugId", "autoWidth": true },
                    { "data": "Reference", "name": "Reference", "autoWidth": true },
                    { "data": "NameDrug", "title": "NameDrug", "name": "ContactName", "autoWidth": true },
                    { "data": "DateFabrication", "name": "DateFabrication", "autoWidth": true },
                    { "data": "DatePeremption", "name": "DatePeremption", "autoWidth": true },
                    { "data": "Prix", "name": "Prix", "autoWidth": true },
                    { "data": "Category", "name": "Category", "autoWidth": true },
                    //{
                    //    "render": function (data, type, full, meta) { return '<a class="btn btn-info" href="/Demo/Edit/' + full.DrugId + '">Edit</a>'; }
                    //},
                    //{
                    //    data: null, render: function (data, type, row) {
                    //        return "<a href='#' class='btn btn-danger' onclick=DeleteData('" + row.DrugId + "'); >Delete</a>";
                    //    }
                    //},
                ]
            });
        });
    </script>
    <link href="~/Content/Styles/Site.css" rel="stylesheet" />
</head>
<body style="padding: 64px;
       background-color:gray;
        color:white;
        align-content:center">
    <h2 style="color:aquamarine">Drugs list</h2>
    <button style="color:white;margin-bottom:10px" class="btn btn-info">
        <i class="fa fa-plus"></i>
        @Html.ActionLink("Create New", "Create")
    </button>

    <table id="demoGrid" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0" style="color:black;background-color:lightgrey; margin-top:12px;">
        <thead class="table table-bordered" style="background-color:darkslategray;color:white">
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Reference)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.NameDrug)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.DateFabrication)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.DatePeremption)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Prix)
                </th>

                <th>
                    @Html.DisplayNameFor(model => model.Category.MatriculeCategory)
                </th>
                <th>Actions</th>
            </tr>
        </thead>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Reference)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.NameDrug)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DateFabrication)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DatePeremption)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Prix) fcfa
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.Category.MatriculeCategory)
                </td>
                <td>
                    <div class="btn btn-info"> @Html.ActionLink("Edit", "Edit", new { id = item.IdDrug }) </div>|
                    <div class="btn btn-success">@Html.ActionLink("Details", "Details", new { id = item.IdDrug })</div> |
                    <div class="btn btn-danger">@Html.ActionLink("Delete", "Delete", new { id = item.IdDrug })<i class="fa fa-trash-alt fa-lg"></i></div>
                </td>
            </tr>
        }

    </table>

    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <script src="//cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap.min.js"></script>


</body>